# ラボ 1A: Azure Machine Learning ワークスペースの作成

このラボでは、このコースの残りの部分で使用する Azure Machine Learning ワークスペースを作成します。

## 開始する前に

このコースのラボを完了するには、Azure サブスクリプションが必要となります。まだお持ちでない場合は、[https://azure.microsoft.com](https://azure.microsoft.com) で無料試用版にサイン アップできます。

このコースで提供される Azure Pass サブスクリプションを使用している場合、アカウントがこのコースの一部の操作に必要となるサブスクリプション **所有者** ロールに割り当てられていない可能性があります。自分のアカウントを **所有者** ロールに追加するには:

1. [Azure portal](https://portal.azure.com) にサインインし、**サブスクリプション**を表示します。
2. Azure Passを使用して作成したサブスクリプションを選択します (おそらく、名前は **Azure Pass - Sponsorship** に似ています)。
3. サブスクリプションのブレードで、**個人用のアクセス許可**ページを開き、そのリンクをクリックしてサブスクリプションの完全なアクセスの詳細を表示します。
4. **ロールの割り当てを追加** で、**追加** をクリックします。次に、次の項目を選択して、**保存**をクリックします。
    - **ロール**: 所有者
    - **アクセスの割り当て先**: Azure AD ユーザー、グループ、またはサービス プリンシパル
    - **選択**: Azure へのサインインに使用した Microsoft アカウント。

## タスク 1: Azure ML ワークスペースを作成する

名前が示すように、ワークスペースは、機械学習プロジェクトで作業するために必要なすべての Azure ML 資産を管理するための一元的な場所です。

1. [Azure portal](https://portal.azure.com)で、新しい **Machine Learning** リソースを作成し、一意のワークスペース名を指定し、場所に最も近いリージョンに新しいリソース グループを作成します。
2. ワークスペースと関連リソースが作成されたら、ポータルでワークスペースを表示します。

## タスク 2: Azure ML Studio インターフェイスを探索する

Azure portal では、ワークスペース資産を管理できます。しかし、データ サイエンティストの場合、このツールには、Azure の一般的なリソースの管理に関連する多くの無関係な情報とリンクが含まれています。代わりに、ワークスペースを管理するために、Azure ML 固有の Web インターフェイスを使用することもできます。

> **注**: Azure ML 用 Web ベースのインターフェイスは、*Azure Machine Learning studio* と名前が付けられています。ビジュアル デザイナーを使用して、機械学習モデルを作成する無料の *Azure Machine Learning Studio* 製品があるため、誤解を招くおそれがあります。このビジュアル デザイナーのよりスケーラブルなバージョンは、新しいスタジオ インターフェイスに含まれています。

1. Azure portal の Azure Machine Learning ワークスペース用ブレードを開き、**概要** ページから **スタジオの起動** をクリックして、**Azure Machine Learning Studio** を起動します。または、新しいブラウザーのタブで、[https://ml.azure.com](https://ml.azure.com) を開きます。メッセージが表示されたら、前のタスクで使用した Microsoft アカウントを使用してサインインし、Azure サブスクリプションとワークスペースを選択します。
2. ワークスペースの Azure Machine Learning Studio インターフェイスを表示する - ワークスペース内のすべての資産をここから管理できます。

## タスク 3: コンピューティング リソースの作成

Azure Machine Learning の利点の 1 つは、大規模に実験とトレーニング スクリプトを実行できるクラウドベースのコンピューティングを作成できることです。

1. ワークスペースの Azure Machine Learning Studio Web インターフェイスで、**管理** セクションのにある **コンピューティング** ページを表示します。ここで、データ サイエンス アクティビティのすべてのコンピューティング先を管理します。
2. **コンピューティング インスタンス** タブで、**作成** をクリックし、新しいコンピューティング インスタンスを追加します。この VM は、後続のラボで Notebook を使用する開発環境として使用します。
    * **仮想マシンタイプ**: CPU
    * **仮想マシンのサイズ**: Standard_DS11_v2
    * **コンピューティング名**: ユニークな名前
3. Notebook VM を作成している間に、**コンピューティング クラスター** タブに切り替え、**作成** をクリックして、次の設定で新しいトレーニング クラスターを追加します。
    * **仮想マシンの優先度**: 専用 
    * **仮想マシン タイプ**: CPU
    * **仮想マシンのサイズ**: Standard_DS11_v2
    * **コンピューティング名**: ユニークな名前
    * **ノードの最小数**: 0
    * **ノードの最大数**: 2
    * **スケールダウン前のアイドル秒数**: 120
4. **推論クラスター** タブに注意してください。ここで、トレーニング済みのモデルを Web サービスとしてデプロイするコンピューティング先を作成および管理できます。
5. **アタッチされたコンピューティング** タブに注意してください。ここで、ワークスペースの外部に存在する仮想マシンまたは Databricks クラスターを接続できます。

    > **注**: コンピューティング先ついては、このコースの後半で説明します。

## タスク 4: データ リソースを作成

データの処理に使用できるコンピューティング リソースがいくつかできたので、処理するデータを格納および取り込む方法が必要になります。

1. *Studio* インターフェイスで、**データストア** ページを表示します。Azure ML ワークスペースには、ワークスペースと共に作成された Azure ストレージ アカウントに基づく 2 つのデータストアが既に含まれています。これらは、Notebooks、構成ファイル、データを格納するために使用されます。

   > **注**: 実際の環境では、ビジネス データ ストアを参照するカスタム データストア (Azure BLOB コンテナー、Azure Data Lake、Azure SQL データベースなど) を追加する可能性があります。これついては、このコースの後半で説明します。

2. *Studio* インターフェイスで、**データセット** ページを表示します。データセットは、Azure ML で使用する予定の特定のデータ ファイルまたはテーブルを表します。
3. 次の設定を使用して、**Web ファイル** から新しいデータセットを作成します。
    * **基本情報**:
        * **Web URL**: https://aka.ms/diabetes-data
        * **名前**: diabetes dataset (*大文字小文字およびスペースが一致するように注意してください*)
        * **データセットの種類**: 表形式
        * **説明**: 糖尿病データ
    * **設定とプレビュー**:
        * **ファイル形式**: 区切り
        * **区切り記号**: コンマ (,)
        * **エンコード**: UTF-8
        * **列ヘッダー**: 最初のファイルのヘッダーを使用する
        * **行をスキップ**: なし
    * **スキーマ**:
        * **Path**以外のすべての列を含める
        * 自動的に検出された"種類"を確認する
    * **詳細の確認**:
        * 作成後にデータセットをプロファイルしない
4. データセットを作成したら、データセットを開き、**詳細**ページを表示して、データのサンプルを確認します。このデータは、糖尿病の検査を受けた患者の詳細を表し、このコースの後続の多くのラボで使用します。

    > **注**: 必要に応じて、データセットの *プロファイル*を生成して、詳細を表示できます。データセットについては、このコースの後半で説明します。
